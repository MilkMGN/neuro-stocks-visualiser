<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Neuro Stocks Portfolio</title>
  <meta name="description" content="Live view of the Neuro-Sama portfolio: equity curve, positions, and recent fills auto-refreshing every 30s." />
  <link rel="canonical" href="https://neurostocks.milkmgn.online/" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Neuro Stocks Portfolio" />
  <meta property="og:description" content="Auto-updating dashboard for Neuro's trading account - equity, positions, and activity." />
  <meta property="og:url" content="https://neurostocks.milkmgn.online/" />
  <meta property="og:image" content="https://neurostocks.milkmgn.online/images/favicon.png" />
  <meta property="og:image:width" content="128" />
  <meta property="og:image:height" content="128" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Neuro Stocks Portfolio" />
  <meta name="twitter:description" content="Auto-updating dashboard for Neuro's trading account - equity, positions, and activity." />
  <meta name="twitter:image" content="https://neurostocks.milkmgn.online/images/favicon.png" />
  <meta name="theme-color" content="#d86cff" />
  <link rel="icon" type="image/png" href="images/favicon.png">
  <link rel="alternate icon" href="images/favicon.ico">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="page">
    <header>
      <div class="brand">
        <img src="images/favicon.png" alt="Neuro icon">
        <div class="title-block">
          <h1>Neuro Stocks Visualiser</h1>
          <div class="subtitle">Live view of VedalAI bot portfolio &amp; activity. Times shown in UTC.</div>
        </div>
      </div>
      <div class="controls">
        <div class="pill">Auto-refresh every 30s</div>
        <div class="pill" id="last-updated">Last updated: --</div>
        <button id="refresh-btn">Refresh now</button>
      </div>
    </header>

    <div class="banner" id="sleep-banner">
      <div class="bubble"><img src="images/neuro_sleep.png" alt="Sleeping Neuro" width="32" height="32"></div>
      <span>Neuro is currently asleep. No more trades will be made until she wakes at 3pm UTC!</span>
    </div>

    <div class="pill" id="error-box" style="display:none; margin-bottom: 10px; border-color: rgba(255,107,138,0.6); color: #ff6b8a; background: rgba(255,107,138,0.08);">
      Error: <span id="error-text"></span>
    </div>

    <section class="grid" id="summary">
      <div class="card">
        <div class="metric-label">Portfolio Value</div>
        <div class="metric-value" id="portfolio-value"><span class="skeleton" style="width: 140px;"></span></div>
        <div class="muted">Total equity including positions</div>
      </div>
      <div class="card">
        <div class="metric-label">Cash</div>
        <div class="metric-value" id="cash"><span class="skeleton" style="width: 90px;"></span></div>
        <div class="muted">Uninvested cash balance</div>
      </div>
      <div class="card">
        <div class="metric-label">Since Inception</div>
        <div class="metric-value"><span id="pl"></span><span id="pl-percent" class="delta"></span></div>
        <div class="muted">vs $20,000 initial capital</div>
      </div>
      <div class="card">
        <div class="metric-label">Latest Move</div>
        <div class="metric-value"><span id="last-change"></span><span id="last-change-percent" class="delta"></span></div>
        <div class="muted" id="last-change-time">Most recent history point</div>
      </div>
    </section>

    <div class="section-title">
      <h2>Equity Curve</h2>
      <div class="mini">Downsampled for performance; chronological history.</div>
    </div>
    <div class="card">
      <canvas id="equity-chart" height="340"></canvas>
    </div>

    <div class="section-title">
      <h2>Open Positions</h2>
      <div class="mini">Market value, basis, and intraday change.</div>
    </div>
    <div class="card">
      <table id="positions-table">
        <thead>
          <tr>
            <th>Symbol</th>
            <th>Qty</th>
            <th>Market Value</th>
            <th>Cost Basis</th>
            <th>Price</th>
            <th>Prev Close</th>
            <th>Today</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="7"><div class="skeleton" style="width: 100%; height: 18px;"></div></td></tr>
        </tbody>
      </table>
    </div>

    <div class="section-title">
      <h2>Recent Activity</h2>
      <div class="mini">Flattened &amp; sorted fills.</div>
    </div>
    <div class="card">
      <div class="activity-list" id="activity-list">
        <div class="skeleton" style="width: 100%; height: 16px;"></div>
        <div class="skeleton" style="width: 80%; height: 16px;"></div>
        <div class="skeleton" style="width: 90%; height: 16px;"></div>
      </div>
    </div>
  </div>

  <script src="env.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
